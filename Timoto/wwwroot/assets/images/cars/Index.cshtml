@using Timoto.Models

@model Timoto.ViewModels.CarFilterVM

<!-- content begin -->
<div class="no-bottom no-top zebra" id="content">
    <div id="top"></div>

    <!-- section begin -->
    <section id="subheader" class="jarallax text-light">
        <img src="~/assets/images/background/2.jpg" class="jarallax-img" alt="">
        <div class="center-y relative text-center">
            <div class="container">
                <div class="row">
                    <div class="col-md-12 text-center">
                        <h1>Cars</h1>
                    </div>
                    <div class="clearfix"></div>
                </div>
            </div>
        </div>
    </section>
    <!-- section close -->

    <section id="section-cars">
        <div class="container">
            <div class="row">
                <!-- FILTER SECTION -->
                <div class="col-lg-3">
                    <form method="get" asp-controller="Car" asp-action="Index">
                        <!-- VEHICLE TYPE -->
                        <div class="item_filter_group">
                            <h4>Vehicle Type</h4>
                            <div class="de_form">
                                @foreach (var vehicle in ViewBag.VehicleTypes as List<VehicleType>)
                                {
                                    <div class="de_checkbox">
                                        <input id="vehicle_type_@vehicle.Id" name="SelectedVehicleTypeIds" type="checkbox" value="@vehicle.Id" @(Model.SelectedVehicleTypeIds.Contains(vehicle.Id) ? "checked" : "") />
                                        <label for="vehicle_type_@vehicle.Id">@vehicle.Name</label>
                                    </div>
                                }
                            </div>
                        </div>

                        <!-- BODY TYPE -->
                        <div class="item_filter_group">
                            <h4>Car Body Type</h4>
                            <div class="de_form">
                                @foreach (var body in ViewBag.BodyTypes as List<BodyType>)
                                {
                                    <div class="de_checkbox">
                                        <input id="body_type_@body.Id" name="SelectedBodyTypeIds" type="checkbox" value="@body.Id" @(Model.SelectedBodyTypeIds.Contains(body.Id) ? "checked" : "") />
                                        <label for="body_type_@body.Id">@body.Name</label>
                                    </div>
                                }
                            </div>
                        </div>

                        <!-- SEAT COUNT -->
                        <div class="item_filter_group">
                            <h4>Car Seats</h4>
                            <div class="de_form">
                                @foreach (var seat in ViewBag.SeatOptions as List<int>)
                                {
                                    <div class="de_checkbox">
                                        <input id="seat_@seat" name="SelectedSeatCounts" type="checkbox" value="@seat" @(Model.SelectedSeatCounts.Contains(seat) ? "checked" : "") />
                                        <label for="seat_@seat">@seat seats</label>
                                    </div>
                                }
                            </div>
                        </div>

                       
                        <!-- ENGINE CAPACITY -->
                        <div class="item_filter_group">
                            <h4>Car Engine Capacity (cc)</h4>
                            <div class="de_form">
                                @{
                                    var engineRanges = new List<(string Label, string Value)>
                                {
                                ("1000 - 2000", "1000-2000"),
                                ("2000 - 4000", "2000-4000"),
                                ("4000 - 6000", "4000-6000"),
                                ("6000+", "6000-max")
                                };
                                }

                                @foreach (var range in engineRanges)
                                {
                                    var isChecked = Model.SelectedEngineRanges != null && Model.SelectedEngineRanges.Contains(range.Value);

                                    <div class="de_checkbox">
                                        <input id="engine_@range.Value"
                                               name="SelectedEngineRanges"
                                               type="checkbox"
                                               value="@range.Value"
                                        @(isChecked ? "checked" : "") />
                                        <label for="engine_@range.Value">@range.Label</label>
                                    </div>
                                }
                            </div>
                        </div>


                        <!-- PRICE -->
                        <div class="item_filter_group">
                            <h4>Price ($)</h4>
                            <div class="price-input">
                                <div class="field">
                                    <span>Min  </span>
                                    <input type="number" name="MinPrice" min="0" max="2000" class="input-min" value="@Model.MinPrice">
                                </div>
                                <div class="field">
                                    <span>Max  </span>
                                    <input type="number" name="MaxPrice" min="0" max="2000" class="input-max" value="@Model.MaxPrice">
                                </div>
                            </div>
                            <div class="slider">
                                <div class="progress"></div>
                            </div>
                            <div class="range-input">
                                <input type="range" class="range-min" min="0" max="2000" value="0" step="1">
                                <input type="range" class="range-max" min="0" max="2000" value="2000" step="1">
                            </div>
                        </div>

                        <!-- SUBMIT -->
                        <button type="submit" class="btn btn-primary mt-3">Apply Filters</button>
                    </form>
                </div>

                <!-- CAR DISPLAY SECTION -->
                <div class="col-lg-9">
                    <div class="row">
                        @foreach (Car car in Model.Cars)
                        {
                            <div class="col-xl-4 col-lg-6">
                                <div class="de-item mb30">
                                    <div class="d-img">
                                        <img src="~/assets/images/cars/@(car.CarImages?.FirstOrDefault()?.ImageUrl ?? "default.jpg")" class="img-fluid" alt="">
                                    </div>
                                    <div class="d-info">
                                        <div class="d-text">
                                            <h4>@car.Name</h4>
                                            <div class="d-item_like">
                                                <i class="fa fa-heart"></i><span>@car.LikeCount</span>
                                            </div>
                                            <div class="d-atr-group">
                                                <span class="d-atr"><img src="~/assets/images/icons/1.svg" alt="">@car.Seats </span>
                                                <span class="d-atr"><img src="~/assets/images/icons/2.svg" alt="">@car.Doors</span>
                                                <span class="d-atr"><img src="~/assets/images/icons/3.svg" alt="">@car.LuggageVolume</span>
                                                <span class="d-atr"><img src="~/assets/images/icons/4.svg" alt="">@car.BodyType?.Name</span>
                                            </div>
                                            <div class="d-price">
                                                Daily rate from <span>$@car.DailyPrice</span>
                                                <a class="btn-main" asp-controller="Car" asp-action="Detail" asp-route-id="@car.Id">Rent Now</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }
                    </div>
                </div>

            </div>
        </div>
    </section>
</div>
<!-- content close -->
<a href="#" id="back-to-top"></a>
